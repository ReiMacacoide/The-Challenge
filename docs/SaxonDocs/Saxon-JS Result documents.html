<!DOCTYPE html>
<html><head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Saxon-JS Result documents</title>
        <meta name="robots" content="noindex, nofollow">
        <meta name="viewport" content="width=768, minimum-scale=1.0, maximum-scale=1.0">
        <script type="text/javascript" src="Saxon-JS%20Result%20documents_files/jstree.js"></script>
        <script src="Saxon-JS%20Result%20documents_files/SaxonJS.js"></script>
        <script>
      window.onload = function() {
        SaxonJS.transform({
           stylesheetLocation: "xsl/jstree.sef.xml",
           initialTemplate: "main"
           });
      }     
        </script>
        <link href="Saxon-JS%20Result%20documents_files/jstree.css" rel="stylesheet" type="text/css">
            
    </head>

<body>

    <div id="wrap">
        
        <div id="header" class="unselectable">
            
            <!-- bread-crumb trail -->
            
            <ul class="trail" id="trail"><li id="trail1"><a href="http://saxonica.com/">Saxonica ▷</a></li><li id="trail2"><a href="http://www.saxonica.com/saxon-js/index.xml">Saxon-JS ▷</a></li><li idt="development" class="trail">Developing Applications ▷</li><li idt="result-documents" class="trail">Result documents</li></ul>
            
        </div>
        
        <!-- find box appears in top-left of display - normally hidden -->
        
        <div class="found">
            
            <p class="foundClosed"></p>
            
            <p class="foundNext"></p>
            
            <p class="foundPrev"></p>
            
            <p id="findstatus" class="foundCount">searching...</p>
            
        </div>
        
        <div id="foundPaths"></div>
        
        <div id="nav" class="unselectable">
            
            
            <!-- logo and search -->
            
            <div id="logo">
                
                <p class="logoBox"><img src="Saxon-JS%20Result%20documents_files/logo_crop-mid-blue-background.gif" alt="saxonica.com" width="120" height="24"></p>
                
                
                <p class="arrowNone"></p>
                
                <p class="search"></p>
                <input id="search" style="font-family:inherit;font-size:12px;float:right;padding:2px;margin-top:4px;width:110px;border:none;">
                    
            </div>
            
            
            <!-- tree-view -->
            
            <ul id="list"><li class="open" id="about"><span class="item">About Saxon-JS</span><ul><li id="saxonce" class="empty"><span class="item">Comparison with Saxon-CE</span></li></ul></li><li class="open" id="changes"><span class="item">Change History</span></li><li class="open" id="starting"><span class="item">Getting started</span><ul><li id="installing" class="empty"><span class="item">Installing the Software</span></li><li id="export" class="empty"><span class="item">Exporting for JS</span></li><li id="running" class="empty"><span class="item">Running Saxon-JS</span></li></ul></li><li class="open" id="development"><span class="item">Developing Applications</span><ul><li id="namespaces" class="empty"><span class="item">Namespaces</span></li><li id="result-documents" class="empty"><span class="hot">Result documents</span></li><li id="source-documents" class="empty"><span class="item">Source documents</span></li><li id="events" class="empty"><span class="item">Handling user input events</span></li><li id="system-events" class="empty"><span class="item">Handling client system events</span></li><li id="animation" class="empty"><span class="item">Animation</span></li><li id="http" class="closed"><span class="item">HTTP client</span></li><li id="global" class="empty"><span class="item">Using global JavaScript functions</span></li><li id="properties" class="empty"><span class="item">Properties of JavaScript objects</span></li><li id="saxonce" class="empty"><span class="item">Migration from Saxon-CE</span></li></ul></li><li class="closed" id="ixsl-extension"><span class="item">Saxon Interactive Extensions</span></li><li class="open" id="api"><span class="item">JavaScript API</span><ul><li id="transform" class="closed"><span class="item">SaxonJS.transform</span></li><li id="getProcessorInfo" class="empty"><span class="item">SaxonJS.getProcessorInfo</span></li><li id="setLogLevel" class="empty"><span class="item">SaxonJS.setLogLevel</span></li><li id="xpathEvaluate" class="empty"><span class="item">SaxonJS.XPath.evaluate</span></li></ul></li><li class="closed" id="conformance"><span class="item">Standards Conformance</span></li><li class="closed" id="samples"><span class="item">Sample Saxon-JS Applications</span></li><li class="closed" id="conditions"><span class="item">Licensing</span></li></ul>
            
        </div>
        
        <!-- main page -->
        
        <div id="main" style="float:left">
      <h1>Result documents</h1>

      <p>The <code>xsl:result-document</code> instruction is used to capture an output tree from the
         XSLT transformation and to determine where this tree should be added to the HTML of the
         rendered page.</p>
      
      <p>The recommended design approach with Saxon-JS is not to render the entire HTML page from
         the stylesheet, but rather to generate fragments of HTML which can be inserted into the
         static skeleton of the page at the appropriate places. So the initial HTML page will
         generally contain a skeletal structure of elements such as <code>div</code>, each with an
            <code>id</code> attribute, waiting to be populated by the stylesheet.</p>
      
      <p>The form <code>&lt;xsl:result-document href="#abcd"&gt;</code> causes the result tree to be
         written as the last (or only) child of the HTML element with a given ID value (in this case
            <code>id="abcd"</code>).</p>
      
      <p>Note that care should be taken when adding script element content to the HTML page. If a
         <code>script</code> element is dynamically added to the HTML page, then in some browsers
         (in particular, Edge) the script content will not be executed. Rather, text content should
         be dynamically added to a <code>script</code> element which is already in the skeletal HTML
         page, using <code>xsl:result-document</code> (or using <code>ixsl:set-property</code> to
         set the <code>textContent</code> property of the <code>script</code> element node).</p>
      
      <aside>With Saxon-CE, it was also possible to select the target element with the form
            <code>&lt;xsl:result-document href="?select=//table[1]/tbody/tr[1]/td[2]"&gt;</code>.
         This is not available with Saxon-JS. However an alternative approach is possible, as outlined below. </aside>
      
      <p>From Saxon-JS 0.9.1 the form <code>&lt;xsl:result-document href="?."&gt;</code> can be
         used to select the current context item as the target for inserting a generated fragment
         of HTML. This can be used in combination with <code>xsl:for-each</code> to navigate to
         a target element, and insert a fragment of HTML, without the need for <code>id</code>
         attributes.</p>

      <p>If the <code>href</code> supplied does not match an existing element in the HTML page, the
            <code>xsl:result-document</code> instruction is ignored and the transform will continue
         to completion.</p>

      <p>System-defined output methods in the <code>ixsl</code> namespace can be used to indicate
         whether the new content should append or replace existing content of the selected element.
         The <code>method</code> attribute may be set to: </p>

      <ul>
         <li><code>ixsl:append-content</code> (the default) - new content is appended after existing
            content</li>
         <li><code>ixsl:replace-content</code> - new content replaces all existing content.</li>
      </ul>

      <p>When HTML page changes are required that only affect attributes, or style properties, the
         extension instructions <code>ixsl:set-attribute</code>, <code>ixsl:remove-attribute</code>
         and <code>ixsl:set-style</code> can be used. See <span class="link bodylink" data-href="/ixsl-extension/instructions">Extension Instructions</span> for more detail.</p>
      <!--  The effect of these instructions, like <code>xsl:result-document</code>, is also
         deferred until the transformation is complete. -->

      <aside>
         <p>Saxon-CE implemented a "pending update list" so that HTML page modifications such as
               <code>xsl:result-document</code> and <code>ixsl:set-attribute</code> were deferred
            until the end of the current transformation phase. This is not implemented in this
            release of Saxon-JS.</p>
         <!--<p>When the <code>xsl:result-document</code> instruction is evaluated, the HTML page is not
            updated immediately. Instead, the result documents are added to a pending update list,
            which is used to modify the HTML page when all processing is complete. The stylesheet
            therefore gets a static view of the HTML page, which is not affected by changes made during
            that processing phase. Of course, when a new transformation starts in response to user
            input, the effects of the previous phase are visible.</p>-->
      </aside>
      
      <h2>Avoid writing to current result tree</h2>
      
      <p>Sometimes it is necessary to throw away results from extension functions or instructions,
         or calls to global JavaScript functions, to prevent them from being written to the current
         result tree.</p>
      
      <p>For instance, to execute a method of a JavaScript object, <span class="link bodylink code" data-href="/ixsl-extension/functions/call">ixsl:call()</span> may be used in the
         <code>select</code> attribute of an <code>xsl:sequence</code> instruction. Typically this
         will add the result of the <code>ixsl:call()</code> to the current result tree. To instead
         throw away the result, use a predicate that resolves to false at run-time, for instance:</p>
      <samp>&lt;xsl:sequence select="ixsl:call(...)[current-date() lt xs:date('2000-01-01')]" /&gt;</samp>
      
      <p>Similarly, from Saxon-JS 1.1.0 the <span class="link bodylink code" data-href="/ixsl-extension/instructions/schedule-action">ixsl:schedule-action</span> instruction returns
         an object (which is only empty if only the <code>wait</code> attribute is used). To prevent
         this object being written to the current result tree, use something like the following:</p>
      <samp>&lt;xsl:variable name="request" as="item()*"&gt;
   &lt;ixsl:schedule-action http-request="$requestParams"&gt;
      &lt;xsl:call-template name="action"/&gt;
   &lt;/ixsl:schedule-action&gt;
&lt;/xsl:variable&gt;
&lt;xsl:sequence select="$request[current-date() lt xs:date('2000-01-01')]"/&gt;</samp>

   </div>
        
        <!-- footnote anchored to bottom of display -->
        
        <div id="footer">
            
            <div id="info" class="footnote">
                
                <p>Saxon-JS Documentation</p>
                
            </div>
            
            <div>
                
                <p class="arrowRight"></p>
                
                <p class="arrowLeft"></p> 
                
            </div>
            
        </div>
        
        
    </div>
      

   


</body></html>