<!DOCTYPE html>
<html><head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Saxon-JS Change History</title>
        <meta name="robots" content="noindex, nofollow">
        <meta name="viewport" content="width=768, minimum-scale=1.0, maximum-scale=1.0">
        <script type="text/javascript" src="Saxon-JS%20Change%20History_files/jstree.js"></script>
        <script src="Saxon-JS%20Change%20History_files/SaxonJS.js"></script>
        <script>
      window.onload = function() {
        SaxonJS.transform({
           stylesheetLocation: "xsl/jstree.sef.xml",
           initialTemplate: "main"
           });
      }     
        </script>
        <link href="Saxon-JS%20Change%20History_files/jstree.css" rel="stylesheet" type="text/css">
            
    </head>

<body>

    <div id="wrap">
        
        <div id="header" class="unselectable">
            
            <!-- bread-crumb trail -->
            
            <ul class="trail" id="trail"><li id="trail1"><a href="http://saxonica.com/">Saxonica ▷</a></li><li id="trail2"><a href="http://www.saxonica.com/saxon-js/index.xml">Saxon-JS ▷</a></li><li idt="changes" class="trail">Change History</li></ul>
            
        </div>
        
        <!-- find box appears in top-left of display - normally hidden -->
        
        <div class="found">
            
            <p class="foundClosed"></p>
            
            <p class="foundNext"></p>
            
            <p class="foundPrev"></p>
            
            <p id="findstatus" class="foundCount">searching...</p>
            
        </div>
        
        <div id="foundPaths"></div>
        
        <div id="nav" class="unselectable">
            
            
            <!-- logo and search -->
            
            <div id="logo">
                
                <p class="logoBox"><img src="Saxon-JS%20Change%20History_files/logo_crop-mid-blue-background.gif" alt="saxonica.com" width="120" height="24"></p>
                
                
                <p class="arrowNone"></p>
                
                <p class="search"></p>
                <input id="search" style="font-family:inherit;font-size:12px;float:right;padding:2px;margin-top:4px;width:110px;border:none;">
                    
            </div>
            
            
            <!-- tree-view -->
            
            <ul id="list"><li class="open" id="about"><span class="item">About Saxon-JS</span><ul><li id="saxonce" class="empty"><span class="item">Comparison with Saxon-CE</span></li></ul></li><li class="open" id="changes"><span class="hot">Change History</span></li><li class="open" id="starting"><span class="item">Getting started</span><ul><li id="installing" class="empty"><span class="item">Installing the Software</span></li><li id="export" class="empty"><span class="item">Exporting for JS</span></li><li id="running" class="empty"><span class="item">Running Saxon-JS</span></li></ul></li><li class="closed" id="development"><span class="item">Developing Applications</span></li><li class="closed" id="ixsl-extension"><span class="item">Saxon Interactive Extensions</span></li><li class="open" id="api"><span class="item">JavaScript API</span><ul><li id="transform" class="closed"><span class="item">SaxonJS.transform</span></li><li id="getProcessorInfo" class="empty"><span class="item">SaxonJS.getProcessorInfo</span></li><li id="setLogLevel" class="empty"><span class="item">SaxonJS.setLogLevel</span></li><li id="xpathEvaluate" class="empty"><span class="item">SaxonJS.XPath.evaluate</span></li></ul></li><li class="closed" id="conformance"><span class="item">Standards Conformance</span></li><li class="closed" id="samples"><span class="item">Sample Saxon-JS Applications</span></li><li class="closed" id="conditions"><span class="item">Licensing</span></li></ul>
            
        </div>
        
        <!-- main page -->
        
        <div id="main" style="float:left">
   <h1>Change History</h1>

   <p>For details of bug fixes, see the <a class="bodylink" href="https://saxonica.plan.io/projects/saxon-js">Saxon-JS project</a> at the Saxonica
      community site.</p>
   
   <h3>Changes between releases 1.1.0 and 1.2.0</h3>
   
   <ul>
      <li>Code updates for Saxon-JS to work correctly with SEFs generated by Saxon-EE 9.9.</li>
      <li>From 9.9, the use of <code>xsl:source-document</code> is no longer supported when exporting for Saxon-JS.
         Generating the SEF will fail at compile time.</li>
   </ul>
   
   
   <h3>Changes between releases 1.0.2 and 1.1.0</h3>
   
   <ul>
      <li><p>Following <a class="bodylink" href="https://saxonica.plan.io/issues/3545">bug 3545</a>,
         changes have been made to the way that JavaScript objects are converted to XDM, and the way
         that XDM maps are converted to JavaScript.</p> 
         <p>Previously an XDM map was converted to a JavaScript Object, whose keys are obtained by
            converting the map keys to strings, and whose corresponding values are obtained by
            applying the conversion rules recursively. This allowed the object representation of the
            map to be easily modified in JavaScript. Such modifications are no longer possible,
            since an XDM map is now retained as a wrapped map object (a wrapped Saxon-JS internal
            "HashTrie" object) when it is converted to JavaScript. It is expected that the wrapped
            map object will be accessed again from the XSLT side (at which point the wrapper is
            simply removed), rather than this being a way to create JavaScript object literals from
            within XSLT.</p>
         <p>Meanwhile, usually when a JavaScript object (which is not of a more specific type which
            is recognised: null, undefined, String, Number, Boolean, Date, Node, Array, or Function)
            is converted to XDM (for instance a value returned from an <code>ixsl:get()</code>
            call), it is held as a wrapped external object. From within an XSLT stylesheet, this XDM
            item behaves a little like a "read-only" XDM map (rather than an actual XDM map as
            previously claimed). The properties of the object become key-value pairs within the map,
            where the key is the property name (as a string), and the value is obtained by applying
            the conversion rules recursively. Note that only the following "accessor" map functions
            can be used: <code>map:get()</code>, <code>map:contains()</code>,
            <code>map:find()</code>. But not <code>map:keys()</code>, or other functions which edit
            a map. This allows the use of the shorthand <code>$object?prop</code> for
            <code>ixsl:get($object, 'prop')</code>, for any such Objects (including Window,
            Location, etc. as well as object literals) without issues caused by inherited and
            nonenumerable properties.</p>
         <p>However, to make it possible to provide values for stylesheet parameters which have
            declared type map(*), in this case the conversion rules are different: a JavaScript
            object will be converted to a true XDM map. This special conversion rule also applies
            for template or function parameters (whether or not they have declared type) supplied
            using the options of a <span class="link bodylink" data-href="/api/transform">SaxonJS.transform</span>
            call. (An alternative way to supply a map, which may be simpler, is to supply the
            parameter as a string containing the JSON text for an object literal, and then call
            <code>parse-json()</code> explicitly in the XSLT.)</p>
         <p>See <span class="link bodylink" data-href="/ixsl-extension/conversions">JS/XDM Type Conversion</span>
            and <span class="link bodylink" data-href="/api/transform/parameters">Supplying stylesheet
               parameters</span> for up to date details.</p>
      </li>
      <li><p>Serialization to JSON (i.e. use of <code>fn:serialize()</code> with method "json") is
         implemented, with some restrictions (see "Serialization to JSON" under <span class="link bodylink" data-href="/conformance/xslt30">XSLT 3.0 and XPath 3.0/3.1 Conformance</span>). Rather than
         using the Saxon-JS conversion between JavaScript objects and XDM, it may be preferable to
         use the following mechanisms for conversion from JSON to XDM and back:</p>
         <ul>
            <li>JSON to XDM: <code>JSON.stringify()</code> in JavaScript, then
               <code>fn:parse-json()</code> in XSLT</li>
            <li>XDM to JSON: <code>fn:serialize()</code> to JSON in XSLT, then
               <code>JSON.parse()</code> in JavaScript</li>
         </ul>
      </li>
      <li>
         <p>Added two ways to set the logging level for warnings, processing messages, or full
            tracing, using the Saxon-JS API: firstly the API method <span class="link bodylink" data-href="/api/setLogLevel">SaxonJS.setLogLevel</span>, and secondly the <span class="link bodylink" data-href="/api/transform">SaxonJS.transform</span> option <code>logLevel</code>.</p>
      </li>
      <li>
         <p>Additions to the <span class="link bodylink" data-href="/api/transform">SaxonJS.transform</span> API:
            <code>templateParams</code> and <code>tunnelParams</code> to allow parameters to be
            supplied for call-template invocation.</p>
      </li>
      <li>
         <p>The extension instruction <span class="link bodylink code" data-href="/ixsl-extension/instructions/schedule-action">ixsl:schedule-action</span> has been
            updated to allow document fetches and HTTP requests to be terminated: either using a
            timeout, or by user initiated abort. From Saxon-EE 9.8.0.10, the <code>wait</code>
            attribute can now be used to specify a timeout for corresponding document fetches or
            HTTP requests (as specified using the <code>document</code> or <code>http-request</code>
            attributes respectively). Note that an <code>ixsl:schedule-action</code> instruction
            previously returned nothing, but now returns the associated JavaScript
            <code>XMLHttpRequest</code> objects, where appropriate. This allows the HTTP requests to
            be aborted by calling the <code>XMLHttpRequest.abort</code> method, which can be
            initiated by user interaction as specified in the application XSLT stylesheet. See <span class="link bodylink" data-href="/development/http/termination">HTTP request termination</span> for
            more information and examples.</p>
      </li>
      <li>
         <p>Some Saxon extension functions are now available in Saxon-JS (see <span class="link bodylink" data-href="/conformance/saxon-extensions">Saxon extensions</span>):</p>
         <ul>
            <li><code>saxon:discard-document()</code> can be used to remove a document from
               Saxon-JS's local cache, to release memory (see <a class="bodylink code" href="https://www.saxonica.com/documentation/index.html#!functions/saxon/discard-document" target="_blank">saxon:discard-document</a> in the Saxon documentation).</li>
            <li><code>saxon:timestamp()</code> returns an <code>xs:dateTimeStamp</code> value
               representing the instant in time at which the function is called (see <a class="bodylink code" href="https://www.saxonica.com/documentation/index.html#!functions/saxon/timestamp" target="_blank">saxon:timestamp</a> in the Saxon documentation). Note that
               <code>saxon:timestamp()</code> differs from <code>fn:current-dateTime()</code> in
               that successive calls return different values.</li>
         </ul>
      </li>
   </ul>
   
   <h3>Changes between releases 1.0.1 and 1.0.2</h3>
   
   <ul>
      <li>A space-separated list can now be supplied in the <code>document</code> attribute of
         <span class="link bodylink code" data-href="/ixsl-extension/instructions/schedule-action">ixsl:schedule-action</span>, to fetch
         multiple documents before the contained call is invoked.</li>
   </ul>

   <h3>Changes between releases 1.0.0 and 1.0.1</h3>

   <ul>
      <li>
         <p>Many more XSLT 3.0 features are now implemented. Some require Saxon 9.8 at compile time.
            See <span class="link bodylink" data-href="/conformance">conformance</span> for full details. Newly
            implemented features include:</p>
         <ul>
            <li>
               <code>xsl:where-populated, xsl:on-empty, xsl:on-non-empty, xsl:fork</code>
            </li>
            <li>
               <code>snapshot(), available-system-properties()</code>
            </li>
            <li>use of initial mode <code>"#unnamed"</code></li>
            <li>accumulators (requires Saxon 9.8)</li>
            <li><code>collection()</code> (requires Saxon 9.8)</li>
            <li>merging (requires Saxon 9.8)</li>
            <li>multiple packages (requires Saxon 9.8)</li>
            <li><code>xsl:source-document</code> in non-streaming mode (requires Saxon 9.8)</li>
            <li><code>xsl:context-item</code> (requires Saxon 9.8)</li>
            <li>Support for collations has been extended to XSLT instructions as well as XPath
               functions</li>
            <li>Regex character class subtraction</li>
            <li>Fixes for <code>xsl:evaluate</code> (default XPath namespace; support for
                  <code>@as</code> result type restriction; support for <code>xsl:with-param</code>
               in addition to <code>@with-params</code>)</li>
         </ul>
      </li>
      <li>
         <p>Additions to the <span class="link bodylink" data-href="/api/transform">SaxonJS.transform</span> API:
               <code>initialFunction</code> and <code>functionParams</code> to allow function call
            invocation; <code>collations</code> to supply collations; <code>collectionFinder</code>
            to supply collections.</p>
      </li>
      <li>
         <p>The <code>SaxonJS.transform()</code> option <code>initialMode</code> set to
            <code>"#unnamed"</code> can be used to force use of the unnamed mode. If <code>initialMode</code>
            is not set, then the default-mode specified in <code>xsl:stylesheet</code> (or
            <code>xsl:package</code>) is used, defaulting to the unnamed mode.</p>
      </li>
      <li>
         <p>Added interactive XSLT mechanism for making asynchronous HTTP requests directly from the
            stylesheet - using the new <code>http-request</code> attribute on <span class="link bodylink code" data-href="/ixsl-extension/instructions/schedule-action">ixsl:schedule-action</span>
            (requires Saxon 9.8). See <span class="link bodylink" data-href="/development/http">HTTP client</span>
            for more information.</p>
      </li>
      <li>
         <p>Using Saxon 1.0.0 or earlier, URIs in the <code>doc()</code> function and in the
               <code>document</code> attribute of <code>ixsl:schedule-action</code> were always
            interpreted relative to the SEF's location. In Saxon-JS 1.0.1, the behaviour depends on
            whether the SEF is <em>relocatable</em>, since this will determine the
               <code>static-base-uri()</code>. From Saxon 9.8, a relocatable SEF can be produced by
            setting the Transform command line option <code>-relocate:on</code> at compile time. If
            the SEF is relocatable, then <code>static-base-uri()</code> is the base URI of the SEF;
            otherwise it is the location of the XSLT stylesheet at compile time. For full details
            see the section about relative URIs at <span class="link bodylink" data-href="/development/source-documents">Source documents</span>.</p>
      </li>
   </ul>

   <h3>Changes between beta release 0.9.1 and full release 1.0.0</h3>

   <ul>
      <li>For use with Saxon-JS 1.0, SEFs should be produced with Saxon-EE 9.7.0.15 or later. (Most
         SEFs produced by older versions of Saxon-EE will run as before, but some will fail with an
         error directing the user to regenerate the SEF.)</li>
      <li>Added <span class="link bodylink" data-href="/conformance/dynamic-xpath">Dynamic XPath evaluation</span>
         for use with <code>xsl:evaluate</code>, and directly via the <span class="link bodylink" data-href="/api/xpathEvaluate">XPath API</span>.</li>
      <li>The use of collations in XPath functions is now implemented, see <span class="link bodylink" data-href="/conformance">Conformance</span> for details (and restrictions).</li>
      <li>Known performance issues have been addressed.</li>
   </ul>

   <h3>Changes between beta releases 0.9 and 0.9.1</h3>

   <ul>
      <li>The form <code>&lt;xsl:result-document href="?."&gt;</code> can now be used to specify the
         current context as the target for inserting generated HTML fragments, see <span class="link bodylink" data-href="/development/result-documents">Result documents</span>.</li>

      <li>Added support for the transform options <code>sourceNode</code> and
            <code>sourceText</code>, see <span class="link bodylink" data-href="/api/transform">SaxonJS.transform</span>.</li>

      <li>Values for stylesheet parameters with type <code>map(*)</code> and <code>array(*)</code>
         can now be supplied using the transform option <code>stylesheetParams</code> (requires
         Saxon-EE 9.7.0.14 or later). See <span class="link bodylink" data-href="/api/transform/parameters">Supplying stylesheet parameters</span>.</li>

      <li>The interactive XSLT function <span class="link bodylink" data-href="ixsl-extension/functions/apply">ixsl:apply()</span> is added (requires Saxon-EE 9.7.0.12 or later).</li>

      <li>The XSLT 3.0 <code>xsl:iterate</code> and <code>xsl:evaluate</code> instructions are now
         implemented (requires Saxon-EE 9.7.0.12 or later).</li>

      <li>The third-party URI.js library is no longer used.</li>

      <li>Extended browser support: Saxon-JS 0.9 tested with current versions of Safari, Firefox and
         Chrome; Saxon-JS 0.9.1 also tested with Internet Explorer, Edge and Opera.</li>
   </ul>

   <p>For details of bug fixes, see the <a class="bodylink" href="https://saxonica.plan.io/projects/saxon-js">Saxon-JS project</a> at the Saxonica
      community site.</p>


</div>
        
        <!-- footnote anchored to bottom of display -->
        
        <div id="footer">
            
            <div id="info" class="footnote">
                
                <p>Saxon-JS Documentation</p>
                
            </div>
            
            <div>
                
                <p class="arrowRight"></p>
                
                <p class="arrowLeft"></p> 
                
            </div>
            
        </div>
        
        
    </div>
      

   


</body></html>